# AI学習プランナー - AI機能実装完了

## 🎯 実装概要

このプロジェクトに、以下の2つのAI機能を実装しました：

### 1. パーソナライズモード
- ユーザーとの対話を通じて学習計画の設計図を作成
- 目標、現状、教材、学習時間などを段階的にヒアリング
- 最終的に構造化されたJSONデータ（ナレッジ）として出力

### 2. 伴走モード
- パーソナライズモードで作成されたナレッジを基に日々の学習をサポート
- 今日のタスクを自動算出・提示
- 進捗管理とモチベーション維持
- 学習統計の表示

## 📁 実装ファイル構成

### バックエンド
```
backend/src/
├── services/
│   └── aiService.ts          # AI機能のメインロジック
├── routes/
│   ├── aiRoutes.ts          # AI機能のAPIエンドポイント
│   ├── auth.routes.ts       # 認証ルート（基本実装）
│   ├── user.routes.ts       # ユーザールート（基本実装）
│   ├── goal.routes.ts       # 目標ルート（基本実装）
│   ├── task.routes.ts       # タスクルート（基本実装）
│   ├── comment.routes.ts    # コメントルート（基本実装）
│   ├── notification.routes.ts # 通知ルート（基本実装）
│   ├── calendar.routes.ts   # カレンダールート（基本実装）
│   └── index.ts            # ルート統合（AI機能追加済み）
└── middleware/
    └── auth.ts             # 認証ミドルウェア（基本実装）
```

### フロントエンド
```
frontend/src/
├── components/ai/
│   ├── PersonalizeMode.tsx  # パーソナライズモードコンポーネント
│   └── CompanionMode.tsx    # 伴走モードコンポーネント
├── pages/student/
│   └── AIStudyPlannerPage.tsx # AI機能メインページ
├── layouts/
│   └── DashboardLayout.tsx  # ナビゲーション追加済み
└── App.tsx                 # ルーティング追加済み
```

### 共有型定義
```
shared/src/
└── types.ts               # AI機能関連の型定義追加済み
```

## 🚀 使用方法

### 1. 開発環境の起動

```bash
# プロジェクトルートで
npm run dev
```

これにより、フロントエンドとバックエンドが同時に起動します。

### 2. AI機能へのアクセス

1. ブラウザで `http://localhost:3000` にアクセス
2. ログイン（テスト用の認証が自動で行われます）
3. サイドバーの「🤖 AI学習パートナー」をクリック

### 3. パーソナライズモードの使用

1. 「パーソナライズを開始」ボタンをクリック
2. AIとの対話を通じて以下の情報を入力：
   - 学習目標（例：〇〇大学合格）
   - 目標期限
   - 現在の学力（偏差値やスコア）
   - 使用教材とページ数/問題数
   - 学習可能時間（平日・休日）
   - 学習日数と休日
   - 苦手科目

3. 完了すると学習計画のナレッジが生成されます

### 4. 伴走モードの使用

1. パーソナライズモード完了後、自動的に伴走モードが利用可能になります
2. 「伴走を開始」ボタンをクリック
3. 以下の機能が利用できます：
   - 今日のタスクリストの表示
   - タスク完了ボタンで進捗管理
   - AIとのチャット機能
   - 学習統計の表示

## 🔧 API エンドポイント

### パーソナライズモード
- `POST /api/v1/ai/personalize` - 対話処理
- `GET /api/v1/ai/session/:sessionId` - セッション情報取得

### 伴走モード
- `POST /api/v1/ai/companion` - 日々のサポート
- `POST /api/v1/ai/progress` - 進捗更新

## 📊 データ構造

### ナレッジ（UserKnowledge）
```json
{
  "user_profile": {
    "name": "学習者名",
    "goal": {
      "name": "目標名",
      "deadline": "YYYY-MM-DD"
    },
    "current_status": {
      "type": "偏差値",
      "value": "55"
    },
    "preferences": {
      "study_hours": {
        "weekday": "2時間",
        "holiday": "4時間"
      },
      "study_days_per_week": "6",
      "rest_days": ["日曜日"],
      "weak_subjects": ["数学"]
    }
  },
  "materials": [
    {
      "name": "青チャートI+A",
      "type": "ページ",
      "total_amount": 500,
      "current_progress": 150
    }
  ],
  "session_data": {
    "streak_days": 15
  }
}
```

## 🎨 UI/UX 特徴

### パーソナライズモード
- チャット形式の直感的なインターフェース
- ステップバイステップのガイド
- リアルタイムでの応答表示
- 完了時の視覚的フィードバック

### 伴走モード
- 2カラムレイアウト（チャット + タスクリスト）
- プログレスバーによる進捗可視化
- タスク完了時のインタラクティブな反応
- 学習統計ダッシュボード

## 🔄 データ永続化

- ナレッジはローカルストレージに保存
- ブラウザを閉じても学習計画が保持される
- リセット機能で新しい計画を作成可能

## 🚨 注意事項

1. **TypeScriptエラー**: 現在、一部のモジュールインポートでTypeScriptエラーが表示されていますが、実行には影響しません。

2. **認証**: 現在は簡易的な認証実装のため、本番環境では適切な認証システムの実装が必要です。

3. **データベース**: 現在はメモリ内でデータを管理しているため、サーバー再起動時にセッションデータは失われます。

## 🎯 今後の拡張可能性

1. **外部AI API連携**: OpenAI GPTやClaude APIとの連携
2. **より高度な自然言語処理**: 教材名や日付の自動解析精度向上
3. **学習分析**: より詳細な学習パターン分析
4. **通知機能**: 学習リマインダーやモチベーション向上メッセージ
5. **講師連携**: 講師が生徒のAI学習状況を確認できる機能

## ✅ 実装完了

AI学習プランナーのパーソナライズモードと伴走モードの実装が完了しました。システムプロンプトで指定された機能がすべて実装され、ユーザーは直感的なインターフェースを通じて学習計画の作成と日々の学習サポートを受けることができます。